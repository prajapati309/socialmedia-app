<p id="notice"><%= notice %></p>

<h1>Chatrooms</h1>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @chatrooms.each do |chatroom| %>
      <tr>
        <td><%= link_to chatroom.name , data: {
          behavior: "chatroom-link", chatroom_id: chatroom.id
        } %></td>
        <% if current_user.admin  %>
        <td><%= link_to 'Show', chatroom , class: "btn btn-default"%></td>
        <td><%= link_to 'Edit', edit_chatroom_path(chatroom) , class: "btn btn-default" %></td>

        <td><%= link_to 'Destroy', chatroom, method: :delete, data: { confirm: 'Are you sure?'}, class: "btn btn-default" %></td>
        <% end -%>
       
        <td>
        <%# render partial: "chatroom_users/chatroom_user" , locals: { chatroom: chatroom } %>
          <%= link_to "Join", chatroom_chatroom_users_path(chatroom) , method: :post , class: "btn btn-default"%>
        </td>
       
        <td>
          <%= link_to "Leave", chatroom_chatroom_users_path(chatroom) , method: :delete , class: "btn btn-default"%>
        </td>

     
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Chatroom', new_chatroom_path %>
